"use strict";angular.module("butterfly",[]).service("VersionService",["$rootScope","$q","$resource",function(a,b,c){var d=null,e=b.defer(),f=!1;this.get=function(a){if(null!=d)e.resolve(d);else if(!f){f=!0;var b=c(a,null);b.get(function(a){f=!1,d=a.version,e.resolve(a.version)},function(a){f=!1,console.log(a),e.reject(a)})}return e.promise}}]).directive("versionVerifier",["$rootScope","VersionService",function(a,b){return{restrict:"E",scope:{url:"@url",version:"@version"},link:function(c,d,e,f){a.isAppUpdated&&b.get(c.url).then(function(b){a.isAppUpdated=a.isAppUpdated&&c.version===b})}}}]);